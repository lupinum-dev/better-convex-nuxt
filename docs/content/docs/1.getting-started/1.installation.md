---
title: Installation
description: Install and configure the Convex Nuxt module in your project.
---

## Prerequisites

Before installing, make sure you have:

- A Nuxt 3.x project
- A Convex project with functions defined

::callout{icon="i-lucide-info" to="https://docs.convex.dev/quickstart" target="\_blank"}
New to Convex? Follow the [Convex quickstart guide](https://docs.convex.dev/quickstart) to set up your backend first.
::

## Install the Module

::code-group

```bash [pnpm]
pnpm add better-convex-nuxt
```

```bash [npm]
npm install better-convex-nuxt
```

```bash [yarn]
yarn add better-convex-nuxt
```

::

## Configure Nuxt

Add the module to your `nuxt.config.ts`:

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  convex: {
    url: process.env.CONVEX_URL,
  },
})
```

## Environment Variables

Create a `.env` file in your project root:

```bash [.env]
CONVEX_URL=https://your-project-123.convex.cloud
```

::callout{icon="i-lucide-lightbulb"}
Find your Convex URL in the [Convex dashboard](https://dashboard.convex.dev) under your project settings.
::

## Verify Installation

Create a simple query to verify everything works:

```vue [app.vue]
<script setup lang="ts">
import { api } from '~/convex/_generated/api'

const { data, status } = useConvexQuery(api.tasks.list, {})
</script>

<template>
  <div>
    <p v-if="status === 'pending'">Loading...</p>
    <p v-else-if="status === 'error'">Error loading tasks</p>
    <p v-else>Found {{ data?.length ?? 0 }} tasks</p>
  </div>
</template>
```

If you see your task count, you're all set!

## Module Options

The module accepts these configuration options:

| Option            | Type                 | Default                  | Description                                 |
| ----------------- | -------------------- | ------------------------ | ------------------------------------------- |
| `url`             | `string`             | `process.env.CONVEX_URL` | Convex deployment URL (WebSocket)           |
| `trustedOrigins`  | `string[]`           | `[]`                     | Additional trusted origins for CORS on auth proxy |
| `permissions`     | `boolean`            | `false`                  | Enable `createPermissions` factory for RBAC |
| `logging.enabled` | `boolean \| 'debug'` | `false`                  | Enable logging (`true` = info, `'debug'` = verbose) |
| `logging.format`  | `'pretty' \| 'json'` | `'pretty'`               | Output format for logs                      |

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  convex: {
    url: process.env.CONVEX_URL,
    permissions: true, // Enable permission composables
    logging: {
      enabled: process.env.NODE_ENV === 'development', // Enable in dev
    },
  },
})
```

### URL Configuration

The module automatically derives the Convex HTTP site URL from your `CONVEX_URL`:

- `https://your-project.convex.cloud` â†’ `https://your-project.convex.site`

::callout{icon="i-lucide-alert-triangle" color="amber"}
**Do not manually set `siteUrl`** unless you're using a custom domain. Setting it to `localhost` or your app's URL will cause a self-request deadlock during SSR auth.
::

For custom Convex domains, you can override the auto-derived URL:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  convex: {
    url: process.env.CONVEX_URL,
    siteUrl: 'https://api.your-custom-domain.com', // Only for custom domains
  },
})
```

### CORS Configuration

The auth proxy validates request origins against `siteUrl` by default. For multi-domain setups (staging, preview deployments), add trusted origins:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  convex: {
    url: process.env.CONVEX_URL,
    trustedOrigins: [
      'https://staging.myapp.com',
      'https://preview-*.vercel.app', // Wildcard for preview deployments
    ],
  },
})
```

::callout{icon="i-lucide-shield"}
Origins are validated using exact match or wildcard patterns. Use `*` to match any substring (e.g., `https://preview-*.vercel.app` matches `https://preview-abc123.vercel.app`).
::

### Environment Variables

| Variable     | Maps To      | Description           |
| ------------ | ------------ | --------------------- |
| `CONVEX_URL` | `convex.url` | Convex deployment URL |

::callout{icon="i-lucide-info"}
**Note on URLs:** `CONVEX_URL` is the only URL you need to set for the module. The Convex HTTP site URL is auto-derived. `SITE_URL` (used by Better Auth in Convex) is a separate variable for your app's public callback URL.
::

## What's Included

The module automatically provides:

- **Auto-imported composables**: `useConvexQuery`, `useConvexMutation`, `useConvexAction`, and more
- **Auth components**: `<ConvexAuthenticated>`, `<ConvexUnauthenticated>`, `<ConvexAuthLoading>`
- **Server utilities**: `fetchQuery`, `fetchMutation`, `fetchAction` for API routes
- **SSR support**: Queries run on the server with automatic client hydration
- **Real-time subscriptions**: Data syncs automatically via WebSocket

---

## Troubleshooting

### Convex Folder Location

This documentation assumes your Convex functions are in `~/convex` (project root). If you use a different location, update your imports accordingly:

```ts
// Default: ~/convex
import { api } from '~/convex/_generated/api'

// If using src/convex
import { api } from '~/src/convex/_generated/api'

// If using a custom path
import { api } from '~/my-backend/_generated/api'
```

### Environment Variables

::callout{icon="i-lucide-alert-triangle" color="amber"}
**Important:** Environment variables are configured in **two different places**. This is a common source of confusion!
::

#### 1. Nuxt App Environment (`.env` file)

Create a `.env` file in your **Nuxt project root**:

```bash [.env]
# Your Convex deployment URL (find in Convex Dashboard > Settings)
CONVEX_URL=https://your-project-123.convex.cloud

# Your app's public URL
# Development: use localhost
SITE_URL=http://localhost:3000
# Production: use your actual domain
# SITE_URL=https://your-app.com
```

#### 2. Convex Dashboard Environment

Set these in the [Convex Dashboard](https://dashboard.convex.dev) under **Settings > Environment Variables**:

```bash
# Secret for Better Auth (generate with: openssl rand -base64 32)
BETTER_AUTH_SECRET=ULPDeGxMKBd7TOROpEZfGhHqCErVvB7QNGLW5DKCkNs=

# Static JWKS for token validation (see Performance docs for generation)
JWKS=[{"alg":"RS256","createdAt":...,"privateKey":"...","publicKey":"..."}]

# Must match your Nuxt app's SITE_URL!
SITE_URL=http://localhost:3000
```

::callout{icon="i-lucide-info"}
**`SITE_URL` must be set in BOTH places** and must match exactly:

- In your Nuxt `.env` file
- In Convex Dashboard environment variables

For production, update both to your actual domain (e.g., `https://your-app.com`).
::

After changing `.env`, restart your dev server - Nuxt only reads environment variables at startup.

### "CONVEX_URL not set" Error

Ensure your Nuxt `.env` file exists and contains a valid `CONVEX_URL`. Find your URL in the [Convex dashboard](https://dashboard.convex.dev) under Settings.

### Types Not Working

If TypeScript doesn't recognize Convex types, run:

```bash
npx convex dev
```

This generates the `_generated/` folder with type definitions.

### Auth Not Working

Common causes:

1. **`SITE_URL` mismatch** - Most common issue! Ensure `SITE_URL` is identical in both:
   - Your Nuxt `.env` file
   - Convex Dashboard environment variables

2. **Missing Convex env vars** - Check these are set in Convex Dashboard:
   - `BETTER_AUTH_SECRET`
   - `JWKS`
   - `SITE_URL`

3. **Wrong localhost URL** - Use `http://localhost:3000` (not `127.0.0.1`)

4. **JWKS not configured** - See [Static JWKS](/docs/advanced/performance#static-jwks) for setup

See [Authentication](/docs/auth-security/authentication) for complete setup.

---

## Next Steps

::card-group
::card{title="Quick Start" to="/docs/getting-started/quick-start" icon="i-lucide-rocket"}
Build your first real-time feature
::
::card{title="Queries" to="/docs/data-fetching/queries" icon="i-lucide-database"}
Learn about fetching data
::
::card{title="Authentication" to="/docs/auth-security/authentication" icon="i-lucide-lock"}
Set up user authentication
::
::

---
title: useConvexAuth
description: Access authentication state and user info.
navigation:
  icon: i-lucide-user
---

Access the current authentication state, user information, and auth token.

## Signature

```ts
function useConvexAuth(): UseConvexAuthReturn
```

## Return Value

| Property | Type | Description |
|----------|------|-------------|
| `isAuthenticated` | `ComputedRef<boolean>` | True if user is logged in |
| `isPending` | `Readonly<Ref<boolean>>` | True while auth is loading |
| `user` | `Readonly<Ref<ConvexUser \| null>>` | User info from JWT |
| `token` | `Readonly<Ref<string \| null>>` | The JWT token |

### ConvexUser

```ts
interface ConvexUser {
  id: string
  name: string
  email: string
  emailVerified?: boolean
  image?: string
  createdAt?: string
  updatedAt?: string
}
```

## Usage Examples

### Basic Auth Check

```vue
<script setup lang="ts">
const { isAuthenticated, user } = useConvexAuth()
</script>

<template>
  <div v-if="isAuthenticated">
    Welcome, {{ user?.name }}!
  </div>
  <div v-else>
    Please sign in
  </div>
</template>
```

### Handle Loading State

```vue
<script setup lang="ts">
const { isAuthenticated, isPending } = useConvexAuth()
</script>

<template>
  <div v-if="isPending">
    Loading...
  </div>
  <div v-else-if="isAuthenticated">
    <Dashboard />
  </div>
  <div v-else>
    <LoginForm />
  </div>
</template>
```

### In Middleware

```ts [app/middleware/auth.ts]
export default defineNuxtRouteMiddleware(() => {
  const { isAuthenticated, isPending } = useConvexAuth()

  // Wait for auth to resolve
  if (isPending.value) return

  // Redirect if not authenticated
  if (!isAuthenticated.value) {
    return navigateTo('/login')
  }
})
```

### Conditional Queries

```ts
const { isAuthenticated } = useConvexAuth()

// Only fetch when authenticated
const { data } = await useConvexQuery(
  api.user.profile,
  computed(() => isAuthenticated.value ? {} : 'skip')
)
```

### Watch Auth Changes

```ts
const { isAuthenticated, user } = useConvexAuth()

watch(isAuthenticated, (authenticated, wasAuthenticated) => {
  if (!authenticated && wasAuthenticated) {
    // User logged out
    navigateTo('/login')
  }
})

watch(user, (newUser) => {
  if (newUser) {
    analytics.identify(newUser.id)
  }
})
```

## Related: useAuthClient

For sign-in/sign-out operations, use `useAuthClient`:

```ts
const authClient = useAuthClient()

// Sign in
await authClient.signIn.email({
  email: 'user@example.com',
  password: 'password123',
})

// Sign up
await authClient.signUp.email({
  name: 'Jane Doe',
  email: 'jane@example.com',
  password: 'password123',
})

// Sign out
await authClient.signOut()
```

## Related: Auth Components

Use built-in components for declarative auth UI:

```vue
<template>
  <ConvexAuthenticated>
    <!-- Only shown when logged in -->
    <UserDashboard />
  </ConvexAuthenticated>

  <ConvexUnauthenticated>
    <!-- Only shown when logged out -->
    <LoginPrompt />
  </ConvexUnauthenticated>
</template>
```

## SSR Behavior

In SSR mode, auth state is populated on the server:

1. Server reads session cookie
2. Exchanges for JWT token
3. Decodes user info
4. Hydrates to client

Result: No flash of unauthenticated content. `isAuthenticated` is correct from the first render.

## SPA Behavior

Without SSR (`ssr: false`):

1. Page loads (isPending = true)
2. Client checks for session
3. If found, fetches token
4. Auth state updates (isPending = false)

There's a brief loading period while auth resolves.

## Token Access

The `token` ref contains the raw JWT. Rarely needed, but available:

```ts
const { token } = useConvexAuth()

// For custom API calls that need the token
const response = await fetch('/api/custom', {
  headers: {
    Authorization: `Bearer ${token.value}`,
  },
})
```

## TypeScript

The user type includes standard claims:

```ts
const { user } = useConvexAuth()

// user is Ref<ConvexUser | null>

if (user.value) {
  console.log(user.value.id)    // string
  console.log(user.value.email) // string
  console.log(user.value.name)  // string
}
```

## Notes

- Auth state is reactive â€” UI updates automatically on login/logout
- SSR auth requires the [proxy setup](/docs/guide/auth#ssr-mode-requires-proxy)
- Token refreshes automatically before expiry
- `isPending` is only true during initial auth resolution

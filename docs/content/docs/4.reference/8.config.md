---
title: Config
description: All nuxt.config.ts options for the Convex module.
navigation:
  icon: i-lucide-settings
---

Configure the Convex module in your `nuxt.config.ts`.

## Basic Configuration

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  convex: {
    url: process.env.CONVEX_URL,
  },
})
```

## All Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `url` | `string` | required | Convex deployment URL |
| `siteUrl` | `string` | `undefined` | Convex HTTP Actions URL (for auth) |
| `skipAuthRoutes` | `string[]` | `[]` | Routes to skip auth checks |
| `trustedOrigins` | `string[]` | `[]` | Additional CORS origins |
| `permissions` | `boolean` | `false` | Enable permission composables |
| `logging` | `LoggingConfig` | `{ enabled: false }` | Logging configuration |
| `authCache` | `AuthCacheConfig` | `{ enabled: false }` | SSR auth token caching |

## url

**Required.** Your Convex deployment URL (WebSocket endpoint).

```ts
convex: {
  url: process.env.CONVEX_URL,
  // or
  url: 'https://your-project.convex.cloud',
}
```

Find this in your Convex Dashboard or `.env.local` after running `npx convex dev`.

## siteUrl

Convex HTTP Actions URL. Required for authentication.

```ts
convex: {
  url: process.env.CONVEX_URL,
  siteUrl: process.env.CONVEX_SITE_URL,
}
```

Find this in Convex Dashboard → Settings → URL & Deploy Key.

## skipAuthRoutes

Routes where auth token fetching should be skipped. Improves performance for public pages.

```ts
convex: {
  skipAuthRoutes: [
    '/',           // Home page
    '/about',      // About page
    '/blog/**',    // All blog pages
    '/docs/**',    // All docs pages
  ],
}
```

Supports glob patterns:

| Pattern | Matches |
|---------|---------|
| `/about` | Exact match |
| `/blog/*` | `/blog/post` but not `/blog/a/b` |
| `/blog/**` | `/blog/post` and `/blog/a/b/c` |

## trustedOrigins

Additional CORS origins for the auth proxy. Useful for preview deployments.

```ts
convex: {
  trustedOrigins: [
    'https://preview-*.vercel.app',
    'https://staging.example.com',
  ],
}
```

Your main domain is automatically trusted.

## permissions

Enable the `createPermissions` factory for role-based access control.

```ts
convex: {
  permissions: true,
}
```

See [Permissions Reference](/docs/reference/use-permissions) for usage.

## logging

Configure module logging for debugging.

```ts
convex: {
  logging: {
    enabled: true,      // or 'debug' for verbose
    format: 'pretty',   // or 'json' for structured logs
  },
}
```

### Logging Levels

| Value | Description |
|-------|-------------|
| `false` | Logging disabled |
| `true` | Info level (auth changes, operations) |
| `'debug'` | Verbose (subscriptions, connection state) |

### Log Formats

| Format | Use Case |
|--------|----------|
| `'pretty'` | Development, human-readable |
| `'json'` | Production, log aggregation |

### Log Events

When enabled, you'll see events like:

- `plugin:init` — Module initialization
- `auth:change` — Auth state transitions
- `subscription:change` — Subscription lifecycle
- `operation:complete` — Query/mutation timing
- `connection:change` — WebSocket state

## authCache

Cache auth tokens server-side to reduce token exchanges. Recommended for high-traffic apps.

```ts
convex: {
  authCache: {
    enabled: true,
    ttl: 900, // 15 minutes in seconds
  },
}
```

### Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `enabled` | `boolean` | `false` | Enable caching |
| `ttl` | `number` | `900` | Cache lifetime in seconds |

### With Redis

For multi-instance deployments, use Redis storage:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  convex: {
    authCache: {
      enabled: true,
      ttl: 900,
    },
  },

  nitro: {
    storage: {
      'cache:convex:auth': {
        driver: 'redis',
        url: process.env.REDIS_URL,
      },
    },
  },
})
```

## Full Example

Production-ready configuration:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  convex: {
    // Required
    url: process.env.CONVEX_URL,
    siteUrl: process.env.CONVEX_SITE_URL,

    // Performance: skip auth on public pages
    skipAuthRoutes: [
      '/',
      '/about',
      '/pricing',
      '/blog/**',
      '/docs/**',
    ],

    // Preview deployment support
    trustedOrigins: [
      'https://preview-*.vercel.app',
    ],

    // Enable permissions
    permissions: true,

    // Production logging
    logging: {
      enabled: process.env.NODE_ENV === 'development',
      format: process.env.NODE_ENV === 'development' ? 'pretty' : 'json',
    },

    // Auth caching for performance
    authCache: {
      enabled: process.env.NODE_ENV === 'production',
      ttl: 900,
    },
  },
})
```

## Environment Variables

Typically you'll use environment variables:

```bash [.env.local]
# From `npx convex dev`
CONVEX_URL=https://your-project.convex.cloud

# From Convex Dashboard → Settings
CONVEX_SITE_URL=https://your-project.convex.site
```

Then reference them:

```ts [nuxt.config.ts]
convex: {
  url: process.env.CONVEX_URL,
  siteUrl: process.env.CONVEX_SITE_URL,
}
```

## Per-Page Options

Some options can be set per-page using `definePageMeta`:

```vue
<script setup lang="ts">
definePageMeta({
  skipConvexAuth: true, // Skip auth for this page
})
</script>
```

This overrides the global `skipAuthRoutes` for a specific page.

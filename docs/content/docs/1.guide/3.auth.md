---
title: Authentication
description: Secure your application using Better Auth and Convex.
navigation:
  icon: i-lucide-shield-check
---

This guide walks you through setting up authentication with [Better Auth](https://www.better-auth.com/) and Convex. The [`@convex-dev/better-auth`](https://github.com/get-convex/better-auth) plugin acts as a "Sync Engine," automatically keeping your user data in sync between the Auth provider and your Convex database.

::note
**Prerequisite:** Complete the [Getting Started](/docs/guide/get-started) and [Basics](/docs/guide/basics) guides first. You should have a working Nuxt + Convex app with tasks.
::

## Install Packages

Install the Better Auth core and the Convex integration.

::code-group
```bash [pnpm]
pnpm add better-auth @convex-dev/better-auth
```
```bash [bun]
bun add better-auth @convex-dev/better-auth
```
```bash [npm]
npm install better-auth @convex-dev/better-auth
```
::

## Convex Backend Setup

These files are the same regardless of whether you use SSR or SPA mode.

### Enable the Component

Register the Better Auth component in your Convex configuration.

```ts [convex/convex.config.ts]
import betterAuth from '@convex-dev/better-auth/convex.config'
import { defineApp } from 'convex/server'

const app = defineApp()
app.use(betterAuth)

export default app
```

### Auth Configuration

Create the auth config provider file.

```ts [convex/auth.config.ts]
import type { AuthConfig } from 'convex/server'
import { getAuthConfigProvider } from '@convex-dev/better-auth/auth-config'

export default {
  providers: [getAuthConfigProvider()]
} satisfies AuthConfig
```

### Define the Schema

Add a `users` table to store user data synced from Better Auth.

```ts [convex/schema.ts]
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  users: defineTable({
    authId: v.string(),
    displayName: v.optional(v.string()),
    email: v.optional(v.string()),
    avatarUrl: v.optional(v.string()),
    createdAt: v.number(),
    updatedAt: v.number()
  })
    .index('by_auth_id', ['authId'])
    .index('by_email', ['email']),

  // Your existing tables
  tasks: defineTable({
    text: v.string(),
    isCompleted: v.boolean(),
  }),
});
```

### Create the Auth Bridge

This file configures Better Auth and defines **Triggers** to sync user data into your `users` table automatically.

::code-collapse
```ts [convex/auth.ts]
import { createClient, type GenericCtx, type AuthFunctions } from '@convex-dev/better-auth'
import { convex } from '@convex-dev/better-auth/plugins'
import { betterAuth } from 'better-auth'

import type { DataModel } from './_generated/dataModel'
import { components, internal } from './_generated/api'
import authConfig from './auth.config'

// Get URLs from environment
const siteUrl = process.env.SITE_URL!           // Frontend URL (for CORS/trustedOrigins)
const convexSiteUrl = process.env.CONVEX_SITE_URL!  // Convex HTTP endpoint (for baseURL)

// Auth functions for triggers
const authFunctions: AuthFunctions = internal.auth

// Create the auth component client with triggers to sync users
export const authComponent = createClient<DataModel>(components.betterAuth, {
  authFunctions,
  triggers: {
    user: {
      // Auto-create user in our table when Better Auth creates one
      onCreate: async (ctx, doc) => {
        const now = Date.now()
        await ctx.db.insert('users', {
          authId: doc._id,
          displayName: doc.name,
          email: doc.email,
          avatarUrl: doc.image ?? undefined,
          createdAt: now,
          updatedAt: now
        })
      },
      // Sync name and email changes
      onUpdate: async (ctx, newDoc, oldDoc) => {
        const nameChanged = newDoc.name !== oldDoc.name
        const emailChanged = newDoc.email !== oldDoc.email
        const imageChanged = newDoc.image !== oldDoc.image
        if (nameChanged || emailChanged || imageChanged) {
          const user = await ctx.db
            .query('users')
            .withIndex('by_auth_id', (q) => q.eq('authId', newDoc._id))
            .first()
          if (user) {
            await ctx.db.patch(user._id, {
              ...(nameChanged && { displayName: newDoc.name }),
              ...(emailChanged && { email: newDoc.email }),
              ...(imageChanged && { avatarUrl: newDoc.image ?? undefined }),
              updatedAt: Date.now()
            })
          }
        }
      },
      // Delete from our table when auth user is deleted
      onDelete: async (ctx, doc) => {
        const user = await ctx.db
          .query('users')
          .withIndex('by_auth_id', (q) => q.eq('authId', doc._id))
          .first()
        if (user) {
          await ctx.db.delete(user._id)
        }
      }
    }
  }
})

// Factory function to create auth instance per request
export const createAuth = (ctx: GenericCtx<DataModel>) => {
  return betterAuth({
    baseURL: convexSiteUrl,
    database: authComponent.adapter(ctx),
    emailAndPassword: {
      enabled: true
    },
    plugins: [
      convex({ authConfig })
    ],
    session: {
      expiresIn: 60 * 60 * 24 * 7, // 7 days
      updateAge: 60 * 60 * 24 // 1 day
    },
    trustedOrigins: [siteUrl]
  })
}

// Export trigger handlers for the component
export const { onCreate, onUpdate, onDelete } = authComponent.triggersApi()
```
::

### Register HTTP Routes

Expose the Better Auth routes on the Convex HTTP server.

```ts [convex/http.ts]
import { httpRouter } from 'convex/server'
import { authComponent, createAuth } from './auth'

const http = httpRouter()

// Register all Better Auth routes (/api/auth/*)
authComponent.registerRoutes(http, createAuth)

export default http
```

::tip
**Sync your changes!** After creating all the Convex files above, make sure `npx convex dev` is running to sync your schema and functions.
::

## Environment Variables

### Convex Dashboard

Go to your [Convex Dashboard](https://dashboard.convex.dev) → Settings → Environment Variables and add:

| Variable | Value |
|----------|-------|
| `BETTER_AUTH_SECRET` | Generate with `openssl rand -base64 32` |
| `SITE_URL` | Your frontend URL, e.g., `http://localhost:3000` |

### Local Environment

Find your **HTTP Actions URL** in the Convex Dashboard (Settings → URL & Deploy Key). Add to your `.env.local`:

```bash [.env.local]
CONVEX_DEPLOYMENT=dev:your-project
CONVEX_URL=https://your-project.convex.cloud

# HTTP Actions URL (from Convex Dashboard → Settings → URL & Deploy Key)
CONVEX_SITE_URL=https://your-project.convex.site

# Your Nuxt app URL (must match SITE_URL in Convex Dashboard)
SITE_URL=http://localhost:3000
```

## Nuxt Configuration

::callout{icon="i-lucide-alert-triangle" color="amber"}
**Important:** The setup differs based on whether you use SSR or SPA mode.
::

### SPA Mode (Simpler Setup)

If your app uses `ssr: false`, the auth client talks **directly** to Convex. No server proxy needed.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  ssr: false, // SPA mode

  convex: {
    url: process.env.CONVEX_URL,
    siteUrl: process.env.CONVEX_SITE_URL  // Direct to Convex
  }
})
```

**That's it for Nuxt config!** Skip to [Frontend Implementation](#frontend-implementation).

---

### SSR Mode (Requires Proxy)

If your app uses `ssr: true` (the default), you need a server proxy to forward auth requests and preserve cookies. See [SSR & Hydration](/docs/concepts/ssr-hydration) for more details on SSR patterns.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['better-convex-nuxt'],

  convex: {
    url: process.env.CONVEX_URL,
    siteUrl: process.env.CONVEX_SITE_URL
  }
})
```

**Plus** create the proxy route:

```ts [server/routes/api/auth/[...path].ts]
export default defineEventHandler(async (event) => {
  const config = useRuntimeConfig()
  const path = event.context.params?.path || ''
  const convexSiteUrl = config.public.convex?.siteUrl || process.env.CONVEX_SITE_URL

  const targetUrl = `${convexSiteUrl}/api/auth/${path}`

  // Forward the request to Convex
  return proxyRequest(event, targetUrl, {
    headers: {
      // Forward cookies for session
      cookie: getHeader(event, 'cookie') || '',
    },
  })
})
```

::tip
**Why the proxy?** In SSR mode, auth requests originate from the Nuxt server. The proxy forwards them to Convex while keeping cookies on the same domain as your app.
::

## Frontend Implementation

We'll update the pages from the [Basics guide](/docs/guide/basics) and add authentication. The `app/pages/index.vue` will become a landing page with sign-in/sign-out, and `app/pages/query.vue` will be protected.

### Sign In Page

```vue [app/pages/signin.vue]
<script setup lang="ts">
const router = useRouter()
const authClient = useAuthClient()
const { isAuthenticated } = useConvexAuth()

const email = ref('')
const password = ref('')
const error = ref<string | null>(null)
const loading = ref(false)

// Redirect to home if already authenticated
watch(isAuthenticated, (authenticated) => {
  if (authenticated) {
    router.push('/')
  }
}, { immediate: true })

async function handleSignIn() {
  if (!authClient) return

  error.value = null
  loading.value = true

  try {
    const { error: authError } = await authClient.signIn.email({
      email: email.value,
      password: password.value,
    })

    if (authError) {
      error.value = authError.message
    } else {
      router.push('/')
    }
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <div>
    <h1>Sign In</h1>
    <form @submit.prevent="handleSignIn">
      <div>
        <label>
          Email
          <input v-model="email" type="email" required />
        </label>
      </div>
      <div>
        <label>
          Password
          <input v-model="password" type="password" required />
        </label>
      </div>
      <button type="submit" :disabled="loading">
        {{ loading ? 'Signing in...' : 'Sign In' }}
      </button>
    </form>
    <p v-if="error">{{ error }}</p>
    <p>
      Don't have an account?
      <NuxtLink to="/signup">Sign Up</NuxtLink>
    </p>
  </div>
</template>
```

### Sign Up Page

```vue [app/pages/signup.vue]
<script setup lang="ts">
const router = useRouter()
const authClient = useAuthClient()
const { isAuthenticated } = useConvexAuth()

const name = ref('')
const email = ref('')
const password = ref('')
const error = ref<string | null>(null)
const loading = ref(false)

// Redirect to home if already authenticated
watch(isAuthenticated, (authenticated) => {
  if (authenticated) {
    router.push('/')
  }
}, { immediate: true })

async function handleSignUp() {
  if (!authClient) return

  error.value = null
  loading.value = true

  try {
    const { error: authError } = await authClient.signUp.email({
      name: name.value,
      email: email.value,
      password: password.value,
    })

    if (authError) {
      error.value = authError.message
    } else {
      router.push('/')
    }
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <div>
    <h1>Sign Up</h1>
    <form @submit.prevent="handleSignUp">
      <div>
        <label>
          Name
          <input v-model="name" type="text" required />
        </label>
      </div>
      <div>
        <label>
          Email
          <input v-model="email" type="email" required />
        </label>
      </div>
      <div>
        <label>
          Password
          <input v-model="password" type="password" required />
        </label>
      </div>
      <button type="submit" :disabled="loading">
        {{ loading ? 'Signing up...' : 'Sign Up' }}
      </button>
    </form>
    <p v-if="error">{{ error }}</p>
    <p>
      Already have an account?
      <NuxtLink to="/signin">Sign In</NuxtLink>
    </p>
  </div>
</template>
```

### Home Page with Sign Out

```vue [app/pages/index.vue]
<script setup lang="ts">
const authClient = useAuthClient()
const { isAuthenticated, user } = useConvexAuth()

async function handleSignOut() {
  if (!authClient) return
  await authClient.signOut()
}
</script>

<template>
  <div>
    <nav>
      <NuxtLink to="/query">Query</NuxtLink>
    </nav>
    <h1>Home Page</h1>

    <div v-if="isAuthenticated">
      <p>Welcome, {{ user?.email || user?.name || 'User' }}!</p>
      <button @click="handleSignOut">Sign Out</button>
    </div>

    <div v-else>
      <p>You are not signed in.</p>
      <NuxtLink to="/signin">Sign In</NuxtLink>
      <span> or </span>
      <NuxtLink to="/signup">Sign Up</NuxtLink>
    </div>
  </div>
</template>
```

### Auth Middleware

Create a [route middleware](https://nuxt.com/docs/guide/directory-structure/middleware) to protect sensitive pages.

```ts [app/middleware/auth.ts]
export default defineNuxtRouteMiddleware(() => {
  const { isAuthenticated, isPending } = useConvexAuth()

  // Wait for auth to load
  if (isPending.value) {
    return
  }

  // Redirect to login if not authenticated
  if (!isAuthenticated.value) {
    return navigateTo('/')
  }
})
```

### Protected Page

Apply the middleware to pages that require authentication.

```vue [app/pages/query.vue]
<script setup lang="ts">
definePageMeta({ middleware: 'auth' })

import { api } from '~~/convex/_generated/api'

const { data: tasks, status, error, refresh } = await useConvexQuery(api.tasks.get, {}, { server: true })

const { mutate, pending, error: mutationError, reset } = useConvexMutation(api.tasks.create)

const taskText = ref('')

async function handleSubmit() {
  if (!taskText.value.trim()) return
  await mutate({ text: taskText.value })
  taskText.value = ''
}
</script>

<template>
  <NuxtLink to="/">Home</NuxtLink>

  <div>
    <form @submit.prevent="handleSubmit">
      <input v-model="taskText" type="text" placeholder="Enter task text" :disabled="pending" />
      <button type="submit" :disabled="pending || !taskText.trim()">
        {{ pending ? 'Creating...' : 'Create Task' }}
      </button>
    </form>

    <div v-if="mutationError">
      <p>Something went wrong</p>
      <button @click="reset">Dismiss</button>
    </div>

    <button @click="() => refresh()">Refresh</button>

    <p v-if="status === 'pending'">Loading...</p>
    <p v-else-if="error">Error: {{ error.message }}</p>

    <ul v-else>
      <li v-for="task in tasks" :key="task._id">
        {{ task.text }}
      </li>
    </ul>
  </div>
</template>
```

## Backend Protection

Secure your queries and mutations by checking the user identity. For more advanced access control with roles, see the [Permissions guide](/docs/guide/permissions).

```ts [convex/tasks.ts]
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

export const get = query({
  args: {},
  handler: async (ctx) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) {
      throw new Error("Not authenticated");
    }
    return await ctx.db.query("tasks").collect();
  },
});

export const create = mutation({
  args: {
    text: v.string(),
  },
  handler: async (ctx, args) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) {
      throw new Error("Not authenticated");
    }
    return await ctx.db.insert("tasks", {
      text: args.text,
      isCompleted: false,
    });
  },
});
```

## What Just Happened?

1. **Better Auth** handles session and cookie management
2. When a user registers, the **Trigger** in `convex/auth.ts` fires
3. This writes the user data into your local `users` table
4. Your Nuxt app uses `useConvexAuth()` to check login status
5. Your backend uses `ctx.auth.getUserIdentity()` to secure data

You now have a full-stack, authenticated, real-time application!

::tip{icon="i-lucide-zap"}
**Performance tip:** For high-traffic apps, enable [auth caching](/docs/reference/config#authcache) to reduce token exchanges on each request.
::

## Final Structure

Here is the complete project structure after setting up authentication.

::note
**SSR vs SPA:** The `server/routes/api/auth/[...path].ts` proxy route is **only needed for SSR mode**. If you use `ssr: false`, you can skip that file entirely.
::

::code-tree{defaultValue="convex/auth.ts"}

```ts [convex/convex.config.ts]
import betterAuth from '@convex-dev/better-auth/convex.config'
import { defineApp } from 'convex/server'

const app = defineApp()
app.use(betterAuth)

export default app
```

```ts [convex/auth.config.ts]
import type { AuthConfig } from 'convex/server'
import { getAuthConfigProvider } from '@convex-dev/better-auth/auth-config'

export default {
  providers: [getAuthConfigProvider()]
} satisfies AuthConfig
```

```ts [convex/auth.ts]
import { createClient, type GenericCtx, type AuthFunctions } from '@convex-dev/better-auth'
import { convex } from '@convex-dev/better-auth/plugins'
import { betterAuth } from 'better-auth'

import type { DataModel } from './_generated/dataModel'
import { components, internal } from './_generated/api'
import authConfig from './auth.config'

const siteUrl = process.env.SITE_URL!
const convexSiteUrl = process.env.CONVEX_SITE_URL!

const authFunctions: AuthFunctions = internal.auth

export const authComponent = createClient<DataModel>(components.betterAuth, {
  authFunctions,
  triggers: {
    user: {
      onCreate: async (ctx, doc) => {
        const now = Date.now()
        await ctx.db.insert('users', {
          authId: doc._id,
          displayName: doc.name,
          email: doc.email,
          avatarUrl: doc.image ?? undefined,
          createdAt: now,
          updatedAt: now
        })
      },
      onUpdate: async (ctx, newDoc, oldDoc) => {
        const nameChanged = newDoc.name !== oldDoc.name
        const emailChanged = newDoc.email !== oldDoc.email
        const imageChanged = newDoc.image !== oldDoc.image
        if (nameChanged || emailChanged || imageChanged) {
          const user = await ctx.db
            .query('users')
            .withIndex('by_auth_id', (q) => q.eq('authId', newDoc._id))
            .first()
          if (user) {
            await ctx.db.patch(user._id, {
              ...(nameChanged && { displayName: newDoc.name }),
              ...(emailChanged && { email: newDoc.email }),
              ...(imageChanged && { avatarUrl: newDoc.image ?? undefined }),
              updatedAt: Date.now()
            })
          }
        }
      },
      onDelete: async (ctx, doc) => {
        const user = await ctx.db
          .query('users')
          .withIndex('by_auth_id', (q) => q.eq('authId', doc._id))
          .first()
        if (user) {
          await ctx.db.delete(user._id)
        }
      }
    }
  }
})

export const createAuth = (ctx: GenericCtx<DataModel>) => {
  return betterAuth({
    baseURL: convexSiteUrl,
    database: authComponent.adapter(ctx),
    emailAndPassword: { enabled: true },
    plugins: [convex({ authConfig })],
    session: {
      expiresIn: 60 * 60 * 24 * 7,
      updateAge: 60 * 60 * 24
    },
    trustedOrigins: [siteUrl]
  })
}

export const { onCreate, onUpdate, onDelete } = authComponent.triggersApi()
```

```ts [convex/http.ts]
import { httpRouter } from 'convex/server'
import { authComponent, createAuth } from './auth'

const http = httpRouter()

authComponent.registerRoutes(http, createAuth)

export default http
```

```ts [convex/schema.ts]
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  users: defineTable({
    authId: v.string(),
    displayName: v.optional(v.string()),
    email: v.optional(v.string()),
    avatarUrl: v.optional(v.string()),
    createdAt: v.number(),
    updatedAt: v.number()
  })
    .index('by_auth_id', ['authId'])
    .index('by_email', ['email']),

  tasks: defineTable({
    text: v.string(),
    isCompleted: v.boolean(),
  }),
});
```

```ts [convex/tasks.ts]
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

export const get = query({
  args: {},
  handler: async (ctx) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) {
      throw new Error("Not authenticated");
    }
    return await ctx.db.query("tasks").collect();
  },
});

export const create = mutation({
  args: {
    text: v.string(),
  },
  handler: async (ctx, args) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) {
      throw new Error("Not authenticated");
    }
    return await ctx.db.insert("tasks", {
      text: args.text,
      isCompleted: false,
    });
  },
});
```

```ts [server/routes/api/auth/[...path].ts]
export default defineEventHandler(async (event) => {
  const config = useRuntimeConfig()
  const path = event.context.params?.path || ''
  const convexSiteUrl = config.public.convex?.siteUrl || process.env.CONVEX_SITE_URL

  const targetUrl = `${convexSiteUrl}/api/auth/${path}`

  return proxyRequest(event, targetUrl, {
    headers: {
      cookie: getHeader(event, 'cookie') || '',
    },
  })
})
```

```ts [app/middleware/auth.ts]
export default defineNuxtRouteMiddleware(() => {
  const { isAuthenticated, isPending } = useConvexAuth()

  if (isPending.value) {
    return
  }

  if (!isAuthenticated.value) {
    return navigateTo('/')
  }
})
```

```vue [app/app.vue]
<template>
  <NuxtPage />
</template>
```

```vue [app/pages/index.vue]
<script setup lang="ts">
const authClient = useAuthClient()
const { isAuthenticated, user } = useConvexAuth()

async function handleSignOut() {
  if (!authClient) return
  await authClient.signOut()
}
</script>

<template>
  <div>
    <nav>
      <NuxtLink to="/query">Query</NuxtLink>
    </nav>
    <h1>Home Page</h1>

    <div v-if="isAuthenticated">
      <p>Welcome, {{ user?.email || user?.name || 'User' }}!</p>
      <button @click="handleSignOut">Sign Out</button>
    </div>

    <div v-else>
      <p>You are not signed in.</p>
      <NuxtLink to="/signin">Sign In</NuxtLink>
      <span> or </span>
      <NuxtLink to="/signup">Sign Up</NuxtLink>
    </div>
  </div>
</template>
```

```vue [app/pages/query.vue]
<script setup lang="ts">
definePageMeta({ middleware: 'auth' })

import { api } from '~~/convex/_generated/api'

const { data: tasks, status, error, refresh } = await useConvexQuery(api.tasks.get, {}, { server: true })

const { mutate, pending, error: mutationError, reset } = useConvexMutation(api.tasks.create)

const taskText = ref('')

async function handleSubmit() {
  if (!taskText.value.trim()) return
  await mutate({ text: taskText.value })
  taskText.value = ''
}
</script>

<template>
  <NuxtLink to="/">Home</NuxtLink>

  <div>
    <form @submit.prevent="handleSubmit">
      <input v-model="taskText" type="text" placeholder="Enter task text" :disabled="pending" />
      <button type="submit" :disabled="pending || !taskText.trim()">
        {{ pending ? 'Creating...' : 'Create Task' }}
      </button>
    </form>

    <div v-if="mutationError">
      <p>Something went wrong</p>
      <button @click="reset">Dismiss</button>
    </div>

    <button @click="() => refresh()">Refresh</button>

    <p v-if="status === 'pending'">Loading...</p>
    <p v-else-if="error">Error: {{ error.message }}</p>

    <ul v-else>
      <li v-for="task in tasks" :key="task._id">
        {{ task.text }}
      </li>
    </ul>
  </div>
</template>
```

```vue [app/pages/signin.vue]
<script setup lang="ts">
const router = useRouter()
const authClient = useAuthClient()
const { isAuthenticated } = useConvexAuth()

const email = ref('')
const password = ref('')
const error = ref<string | null>(null)
const loading = ref(false)

watch(isAuthenticated, (authenticated) => {
  if (authenticated) {
    router.push('/')
  }
}, { immediate: true })

async function handleSignIn() {
  if (!authClient) return

  error.value = null
  loading.value = true

  try {
    const { error: authError } = await authClient.signIn.email({
      email: email.value,
      password: password.value,
    })

    if (authError) {
      error.value = authError.message
    } else {
      router.push('/')
    }
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <div>
    <h1>Sign In</h1>
    <form @submit.prevent="handleSignIn">
      <div>
        <label>
          Email
          <input v-model="email" type="email" required />
        </label>
      </div>
      <div>
        <label>
          Password
          <input v-model="password" type="password" required />
        </label>
      </div>
      <button type="submit" :disabled="loading">
        {{ loading ? 'Signing in...' : 'Sign In' }}
      </button>
    </form>
    <p v-if="error">{{ error }}</p>
    <p>
      Don't have an account?
      <NuxtLink to="/signup">Sign Up</NuxtLink>
    </p>
  </div>
</template>
```

```vue [app/pages/signup.vue]
<script setup lang="ts">
const router = useRouter()
const authClient = useAuthClient()
const { isAuthenticated } = useConvexAuth()

const name = ref('')
const email = ref('')
const password = ref('')
const error = ref<string | null>(null)
const loading = ref(false)

watch(isAuthenticated, (authenticated) => {
  if (authenticated) {
    router.push('/')
  }
}, { immediate: true })

async function handleSignUp() {
  if (!authClient) return

  error.value = null
  loading.value = true

  try {
    const { error: authError } = await authClient.signUp.email({
      name: name.value,
      email: email.value,
      password: password.value,
    })

    if (authError) {
      error.value = authError.message
    } else {
      router.push('/')
    }
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <div>
    <h1>Sign Up</h1>
    <form @submit.prevent="handleSignUp">
      <div>
        <label>
          Name
          <input v-model="name" type="text" required />
        </label>
      </div>
      <div>
        <label>
          Email
          <input v-model="email" type="email" required />
        </label>
      </div>
      <div>
        <label>
          Password
          <input v-model="password" type="password" required />
        </label>
      </div>
      <button type="submit" :disabled="loading">
        {{ loading ? 'Signing up...' : 'Sign Up' }}
      </button>
    </form>
    <p v-if="error">{{ error }}</p>
    <p>
      Already have an account?
      <NuxtLink to="/signin">Sign In</NuxtLink>
    </p>
  </div>
</template>
```

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  compatibilityDate: '2025-07-15',
  modules: ['better-convex-nuxt'],

  // For SPA, set ssr: false and the server endpoint is not needed
  // ssr: false,
  
  convex: {
    url: process.env.CONVEX_URL,
    siteUrl: process.env.CONVEX_SITE_URL,
  },
})
```

```bash [.env.local]
# Convex deployment URL
CONVEX_DEPLOYMENT=dev:your-project-name
CONVEX_URL=https://your-project.convex.cloud

# HTTP Actions URL (from Convex Dashboard → Settings → URL & Deploy Key)
CONVEX_SITE_URL=https://your-project.convex.site
```

```bash [.convex-dashboard]
# Set these in Convex Dashboard → Settings → Environment Variables

# Secret for Better Auth (generate with: openssl rand -base64 32)
BETTER_AUTH_SECRET=your-generated-secret-here

# Must match your Nuxt app's URL
SITE_URL=http://localhost:3000
```

::


## Next Steps

You've built an authenticated app! Here's where to go next:

::card-group

::card
---
title: Permissions
icon: i-lucide-shield
to: /docs/guide/permissions
---
Add roles like owner, admin, and member with granular access control.
::

::card
---
title: Protected Pages
icon: i-lucide-lock
to: /docs/patterns/protected-pages
---
Middleware patterns for auth and permission guards.
::

::card
---
title: Auth Flow
icon: i-lucide-key
to: /docs/concepts/auth-flow
---
Understand token lifecycle from login to API requests.
::

::card
---
title: Config Reference
icon: i-lucide-settings
to: /docs/reference/config
---
Skip auth on public pages and other configuration options.
::

::



